from functools import lru_cache
'\nNeo-Clone Auto Setup - Automatic Tool Integration\nAutomatically integrates performance tools with Neo-Clone for OpenCode TUI\nNo manual setup required - just import and use\n'
import sys
import os
from pathlib import Path
current_dir = Path(__file__).parent
sys.path.insert(0, str(current_dir))

@lru_cache(maxsize=128)
def setup_neo_clone_tools():
    """Setup Neo-Clone with automatic tools - call this once at startup"""
    try:
        from auto_tool_integration import setup_auto_tools, auto_integrate_neo_clone
    except ImportError:
        print('Auto tool integration not available - using basic setup')
        return {'status': 'basic', 'tools': {}}
    toolkit = setup_auto_tools()
    try:
        neo_clone = None
        try:
            from main import NeoClone
            neo_clone = NeoClone()
        except:
            pass
        try:
            from enhanced_brain import EnhancedBrain
            neo_clone = EnhancedBrain()
        except:
            pass
        if neo_clone:
            integrated_toolkit = auto_integrate_neo_clone(neo_clone)
            return {'status': 'integrated', 'tools': integrated_toolkit, 'neo_clone': neo_clone}
        else:
            return {'status': 'tools_ready', 'tools': toolkit, 'message': 'Tools ready, integrate manually with auto_integrate_neo_clone(neo_clone_instance)'}
    except Exception as e:
        print(f'Integration failed: {e}')
        return {'status': 'tools_only', 'tools': toolkit, 'error': str(e)}

def get_neo_clone_tools():
    """Get available tools for Neo-Clone"""
    try:
        from auto_tool_integration import get_performance_tools, get_auto_integration
        integration = get_auto_integration()
        return {'performance': get_performance_tools(), 'available': integration.available_tools, 'auto_mode': integration.auto_enabled}
    except ImportError:
        return {'performance': {}, 'available': {}, 'auto_mode': False}
if __name__ != '__main__':
    setup_result = setup_neo_clone_tools()
    NEO_CLONE_TOOLS = setup_result.get('tools', {})
    NEO_CLONE_STATUS = setup_result.get('status', 'unknown')

def get_tools():
    """Get Neo-Clone tools"""
    return NEO_CLONE_TOOLS if 'NEO_CLONE_TOOLS' in globals() else get_neo_clone_tools()

def get_status():
    """Get setup status"""
    return NEO_CLONE_STATUS if 'NEO_CLONE_STATUS' in globals() else 'not_setup'

def profile_method(method_name=None):
    """Decorator to profile Neo-Clone methods"""

    def decorator(func):
        try:
            from auto_tool_integration import auto_profile
            name = method_name or f'neo_clone.{func.__name__}'
            return auto_profile(name)(func)
        except ImportError:
            return func
    return decorator

def time_method(func):
    """Decorator to time Neo-Clone methods"""

    def wrapper(*args, **kwargs):
        try:
            from auto_tool_integration import auto_timer
            with auto_timer() as t:
                result = func(*args, **kwargs)
            return result
        except ImportError:
            return func(*args, **kwargs)
    return wrapper
if __name__ == '__main__':
    print('Testing Neo-Clone Auto Setup...')
    result = setup_neo_clone_tools()
    print(f"Setup status: {result['status']}")
    print(f"Available tools: {len(result.get('tools', {}))}")
    tools = get_tools()
    print(f"Performance tools: {list(tools.get('performance', {}).keys())}")
    print(f"Available modules: {list(tools.get('available', {}).keys())}")
    print('\nNeo-Clone Auto Setup Complete!')
    print('Tools are now available for Neo-Clone to use automatically.')